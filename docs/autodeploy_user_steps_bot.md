# Пошаговая инструкция по автодеплою (для пользователя)

Ниже — короткая последовательность действий, чтобы включить автодеплой бота через GitHub Actions.

1. Подготовьте сервер:
   - Установите зависимости: `git`, `php-cli`, (и при необходимости `docker`).
   - Создайте пользователя деплоя (например, `deploy`) и выдайте права на каталог проекта.
2. Сгенерируйте SSH-ключ для деплоя:
   - `ssh-keygen -t ed25519 -C "deploy@numerolog-bot"`
   - Добавьте публичный ключ на сервер в `~/.ssh/authorized_keys`.
3. Добавьте секреты в GitHub:
   - `SSH_PRIVATE_KEY` — приватный ключ деплоя.
   - `SSH_HOST`, `SSH_PORT`, `SSH_USER` — параметры доступа к серверу.
   - `DEPLOY_PATH` — путь к репозиторию на сервере.
   - `SERVICE_NAME` — имя systemd-сервиса, который запускает бота.
4. Убедитесь, что на сервере есть репозиторий:
   - `git clone <repo_url> <DEPLOY_PATH>`
5. Заполните переменные окружения для бота (`TELEGRAM_BOT_TOKEN`, `LLM_PROVIDER`, ключи LLM и т.д.).
6. Запустите деплой:
   - Сделайте `git push` в ветку `main` или вручную запустите workflow **Deploy to server** в GitHub Actions.
7. Проверьте статус:
   - В разделе **Actions** убедитесь, что деплой завершился успешно.

Подробные инструкции и чек-листы смотрите в `docs/autodeploy.md` и `docs/autodeploy_steps.md`.
